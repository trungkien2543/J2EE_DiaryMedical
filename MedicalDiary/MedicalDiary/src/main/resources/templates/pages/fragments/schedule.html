<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{components/head :: head}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.4/dist/sweetalert2.min.css">
    <!-- FullCalendar CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.10.1/main.min.css">
</head>

<body>
<!-- Thay thế việc sử dụng th:replace trong body bằng div -->
<div th:replace="~{layouts/main :: layout}">
    <div class="container-fluid" th:fragment="content">
        <th:block th:each="receipt : ${listReceipt}">
            <script th:inline="javascript">
                var place = /*[[${receipt.reason}]]*/ '';
                var start = /*[[${receipt.date}]]*/ '';
                var id_receipt = /*[[${receipt.idReceipt}]]*/ '';
                var event = {
                    groupId: id_receipt || 'No ID',
                    title: place || 'No Place',
                    start: start || '2023-01-01'
                };
                if (!window.events) {
                    window.events = [];
                }
                window.events.push(event);
            </script>
        </th:block>

        <div class="row">
            <div class="col-2">
                <div id="mini-calendar"></div>

                <!-- Danh sách checkbox -->
                <div class="checkbox-list">
                    <div class="toggle-arrow" id="toggleArrow">
                        <span>My calendars</span>
                    </div>
                    <div class="checkbox-container" id="checkboxContainer">
                        <label>
                            <input type="checkbox" value="Lâm Hào Kiệt"> Lâm Hào Kiệt
                            <button class="btn btn-sm btn-outline-primary btn-hover" onclick="showAlert(this)">
                                <i class="bi bi-person-plus-fill"></i>
                            </button>
                        </label>
                        <label>
                            <input type="checkbox" value="Birthdays"> Birthdays
                            <button class="btn btn-sm btn-outline-primary btn-hover" onclick="showAlert(this)">
                                <i class="bi bi-person-plus-fill"></i>
                            </button>
                        </label>
                        <label>
                            <input type="checkbox" value="Gia đình"> Gia đình
                            <button class="btn btn-sm btn-outline-primary btn-hover" onclick="showAlert(this)">
                                <i class="bi bi-person-plus-fill"></i>
                            </button>
                        </label>
                        <label>
                            <input type="checkbox" value="Tasks"> Tasks
                            <button class="btn btn-sm btn-outline-primary btn-hover" onclick="showAlert(this)">
                                <i class="bi bi-person-plus-fill"></i>
                            </button>
                        </label>
                    </div>
                </div>
            </div>

            <div class="col-10">
                <div id='calendar-container'>
                    <div id='calendar'></div>
                </div>
            </div>
        </div>

        <!-- Custom Alert as a form -->
        <div id="customAlert" class="custom-alert">
            <form th:action="@{/schedule}" method="post">
                <h2>Nhập mã PIN</h2>
                <p>Vui lòng nhập mã PIN cho: <span id="alertName">Tên Người Dùng</span></p>
                <input type="password" name="pin" id="pinInput" placeholder="Nhập mã PIN" required>
                <div class="alert-buttons">
                    <button type="submit">Xác nhận</button>
                    <button type="button" onclick="closeAlert()">Hủy</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="../js/Schedule/calendar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.4/dist/sweetalert2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.10.1/main.min.js"></script>
</body>
</html>